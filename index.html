<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API FORM</title>
    <link rel="stylesheet" href="styles.css">

    <script>
        function updateFields() {
            var ucid = document.getElementById("ucid");
            var product = document.getElementById("product");
            var product_code = document.getElementById("product_code");

            var selectedProductProduct = ucid.value;

            switch (selectedProductProduct) {
                case "1":
                    product.value = "Life";
                    product_code.value = "LI";
                    break;
                case "2":
                    product.value = "Funeral";
                    product_code.value = "FP";
                    break;
                case "3":
                    product.value = "STI (Short-term insurance)";
                    product_code.value = "ST";
                    break;
                default:
                    product.value = "";
                    product_code.value = "";
                    break;
            }
        }

        function updateUCID() {
            var ucid = document.getElementById("ucid");
            var product = document.getElementById("product");
            var product_code = document.getElementById("product_code");

            var selectedProduct = product.value;

            switch (selectedProduct) {
                case "Life":
                    ucid.value = "1";
                    product_code.value = "LI";
                    break;
                case "Funeral":
                    ucid.value = "2";
                    product_code.value = "FP";
                    break;
                case "STI (Short-term insurance)":
                    ucid.value = "3";
                    product_code.value = "ST";
                    break;
                default:
                    ucid.value = "";
                    product_code.value = "";
                    break;
            }
        }

        function updateProductCode() {
            var ucid = document.getElementById("ucid");
            var product = document.getElementById("product");
            var product_code = document.getElementById("product_code");

            var selectedProductCode = product_code.value;

            switch (selectedProductCode) {
                case "LI":
                    ucid.value = "1";
                    product.value = "Life";
                    break;
                case "FP":
                    ucid.value = "2";
                    product.value = "Funeral";
                    break;
                case "ST":
                    ucid.value = "3";
                    product.value = "STI (Short-term insurance)";
                    break;
                default:
                    ucid.value = "";
                    product.value = "";
                    break;
            }
        }
    </script>
</head>

<body>
    <img style="height:70px;" src="/img/iWYZE.png" alt="iWYZE Online Valuables Insurance">
    <div class="container">
        <div class="header">
            <h2>Submit Single Lead</h2>
        </div>

        <div class="form-input">
            <form action="/send-lead" id="formLeads" method="post">
                <div class="form">
                    <label for="product">Product<span class="red">&#42;</span></label>
                    <br>
                    <select name="products" id="zero" onchange="updateUCID()" required="true">
                        <option value="Life">Life</option>
                        <option value="Funeral">Funeral</option>
                        <option value="STI (Short-term insurance)">STI (Short-term insurance)</option>
                    </select>
                </div>
                <div class="form">
                    <label for="product_code">Product Code</label>
                    <br>
                    <select name="product_codes" id="productCode" onchange="updateProductCode()" required="true">
                        <option value="LI">LI</option>
                        <option value="FP">FP</option>
                        <option value="ST">ST</option>
                    </select>
                </div>
                <div class="form">
                    <label for="ucid">UCID</label>
                    <br>
                    <select name="UCID" id="ucid" onchange="updateFields()" required="true">
                        <option value="1">SLIWYZE_IL_BPBP0001</option>
                        <option value="2">SLIWYZE_IF_BPBP0001</option>
                        <option value="3">SLIWYZE_RM_BPBP0001</option>
                    </select>
                </div>
                <div class="form">
                    <label for="client" id="zero">Client's Title<span class="red">&#42;</span></label>
                    <br>
                    <select name="client-title" id="client_title" class="box-in-boxes" required="true">
                        <option value="1">Dr</option>
                        <option value="2">Mr</option>
                        <option value="3">Mrs</option>
                        <option value="4">Miss</option>
                        <option value="5">Prof</option>
                        <option value="6">Est/Lte</option>
                    </select>
                </div>
                <div class="form">
                    <label for="client_name" id="client_name">Client's Name <span class="red">&#42;</span></label>
                    <br>
                    <input type="text" id="firstName" required="true" placeholder="Client's Name">
                </div>
                <div class="form">
                    <label for="client_surname" id="client_surname">Client's Surname <span class="red">&#42;</span></label>
                    <br>
                    <input type="text" id="surname" required="true" placeholder="Client's Surname">
                </div>
                <div class="form">
                    <label for="phone" id="client's_email">Client's Phone<span class="red">&#42;</span></label>
                    <br>
                    <input type="number" id="phoneNumber" required="true" placeholder="Client's Phone No.">
                </div>
                <div class="form">
                    <label for="phone" id="client's_email">Client's Email<span class="red">&#42;</span></label>
                    <br>
                    <input type="email" id="emailAddress" required="true" placeholder="Client's Email.">
                </div>
                <div class="form">
                    <label for="" id="id">Client's ID No </label>
                    <br>
                    <input type="number" id="idNumber" placeholder="Client's ID No.">
                </div>
                <div class="form">
                    <label for="" id="id">Ref ID</label>
                    <br>
                    <input type="text" id="externalReferenceId" placeholder="Client's Ref ID No.">
                </div>
                <div class="form">
                    <label for="" id="id">Contact Type</label>
                    <br>
                    <select name="client-title" id="contactType" class="box-in-boxes" required="true">
                        <option value="1">CALLBACK</option>
                    </select>
                </div>
                <div class="form">
                    <label for="checkbox">
                        Have you have had a conversation with the customer and has he/she has expressed an interest in
                        receiving a short-term insurance quote from Old Mutual iWYZE?</label>
                    <br>
                    <input type="checkbox" name="yes" id="checkbox_1" required="true" class="checkboxer">
                </div>
                <div class="form">
                    <label for="checkbox">
                        Do you confirm that the customer has given consent for Old Mutual iWYZE to contact him/her?
                    </label>
                    <br>
                    <input type="checkbox" name="yess" id="checkbox_2" required="true" class="checkboxer">
                </div>
                <div class="form">
                    <label for="attatch">Attach Document</label>
                    <br>
                    <input type="file" name="document" id="file">
                </div>
                <div class="form">
                    <label for="notes-add">Additional Notes</label>
                    <br>
                    <textarea name="message" id="notes" cols="50" rows="4"
                        placeholder="Type your message here."></textarea>
                </div>
                <div class="form">
                    <button type="submit" value="Submit" id="submit">Send Lead</button>
                </div>
        </div>
    </div>
    </form>
    <script>
        document.getElementById('formLeads').addEventListener('submit', (event) => {
            event.preventDefault();

            const productCode = document.getElementById('productCode').value;
            const emailAddress = document.getAnimations('emailAddress').value;
            const ucid = document.getElementById('ucid').value;
            const firstName = document.getElementById('firstName').value;
            const surname = document.getElementById('surname').value;
            const phoneNumber = document.getElementById('phoneNumber').value;
            const idNumber = document.getElementById('idNumber').value;
            const externalReferenceId = document.getElementById('externalReferenceId');
            const contactType = document.getElementById('contactType').value;

            const data = JSON.stringify({
                productCode,
                emailAddress,
                ucid,
                firstName,
                surname,
                phoneNumber,
                idNumber,
                externalReferenceId,
                contactType
            });

            const xhr = new XMLHttpRequest();
            xhr.open('POST', 'https://staging-cmp.iwyze.co.za/v2/lead');
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.setRequestHeader('x-api-key', 'KhTiPHznBz2F1Knava2zt60qDg29wZzdaLW4S8Dd');

            xhr.addEventListener('load', () => {
                const responseData = JSON.parse(xhr.responseText);
                document.getElementById('response').textContent = JSON.stringify(responseData, null, 2);
            });


            xhr.send(data);
        });
    </script>

</body>

</html>